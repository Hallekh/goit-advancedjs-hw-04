{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Import the necessary libraries\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport Notiflix from 'notiflix';\n\n// Constants\nconst API_KEY = '42278399-485b72b195d854376bf6ad4cf';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n// Selectors\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n// Initial state\nlet currentPage = 1;\nlet searchQuery = '';\n\n// Event listeners\nsearchForm.addEventListener('submit', searchImages);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\n// Functions\nasync function searchImages(event) {\n  event.preventDefault();\n\n  // Reset pagination\n  currentPage = 1;\n\n  // Hide load more button\n  loadMoreBtn.style.display = 'none';\n\n  // Get search query\n  searchQuery = event.target.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query',\n      position: 'topCenter',\n    });\n    return;\n  }\n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 40,\n      },\n    });\n\n    const { data } = response;\n\n    if (data.hits.length === 0) {\n      Notiflix.Notify.info(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    renderImages(data.hits);\n\n    if (data.totalHits > 40) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      Notiflix.Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    searchForm.reset();\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again.',\n      position: 'topCenter',\n    });\n  }\n}\n\nasync function loadMoreImages() {\n  currentPage++;\n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 40,\n      },\n    });\n\n    const { data } = response;\n\n    renderImages(data.hits);\n\n    if ((currentPage - 1) * 40 + data.hits.length >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      Notiflix.Notify.warning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: \"Sorry, but you've reached the end of search results.\",\n      position: 'topCenter',\n    });\n  }\n}\n\nfunction renderImages(images) {\n  if (currentPage === 1) {\n    gallery.innerHTML = ''; // Clear gallery before rendering new images\n  }\n  searchForm.reset();\n  images.forEach(image => {\n    const card = document.createElement('div');\n    card.classList.add('photo-card');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    img.loading = 'lazy';\n\n    const info = document.createElement('div');\n    info.classList.add('info');\n\n    const likes = document.createElement('p');\n    likes.classList.add('info-item');\n    likes.innerHTML = `<b>Likes:</b> ${image.likes}`;\n\n    const views = document.createElement('p');\n    views.classList.add('info-item');\n    views.innerHTML = `<b>Views:</b> ${image.views}`;\n\n    const comments = document.createElement('p');\n    comments.classList.add('info-item');\n    comments.innerHTML = `<b>Comments:</b> ${image.comments}`;\n\n    const downloads = document.createElement('p');\n    downloads.classList.add('info-item');\n    downloads.innerHTML = `<b>Downloads:</b> ${image.downloads}`;\n\n    info.appendChild(likes);\n    info.appendChild(views);\n    info.appendChild(comments);\n    info.appendChild(downloads);\n\n    card.appendChild(img);\n    card.appendChild(info);\n\n    gallery.appendChild(card);\n  });\n}\n"],"names":["API_KEY","BASE_URL","searchForm","gallery","loadMoreBtn","currentPage","searchQuery","searchImages","loadMoreImages","event","iziToast","response","axios","data","Notiflix","renderImages","images","image","card","img","info","likes","views","comments","downloads"],"mappings":"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"}